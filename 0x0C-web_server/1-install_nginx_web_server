#!/usr/bin/env bash
# Installing Nginx web server

# Install Nginx
sudo apt update
sudo apt install nginx -y

# Create new document root directory from where static content is served
sudo mkdir -p /var/www/web_01.com/html

# Creating an index.html file in web root directory
sudo echo "Hello World!" > /var/www/web_01.com/html/index.html

# Downloading server block file from github into nginx sites-available
# directory
sudo wget -P /etc/nginx/sites-available/ https://raw.githubusercontent.com/carrier-pigeon-san/alx-system_engineering-devops/master/0x0C-web_server/web_01.com

# creating a symbolic link to the server block, in the sites-enabled directory
sudo ln -s /etc/nginx/sites-available/web_01.com /etc/nginx/sites-enabled/

# Remove symbolic link to default server nginx server block from the nginx
# sites-enabled directory
sudo rm /etc/nginx/sites-enabled/default

# Enabling server_names_hash_bucket_size configuration in nginx.conf
sudo sed -i 's/# server_names_hash_bucket_size 64;/server_names_hash_bucket_size 64;/g' /etc/nginx/nginx.conf

# Reload nginx service
sudo nginx -s reload
